<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Agile Toolkit: /Users/rw/Sites/atk4web/atk4/lib/Grid/Advanced.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Agile Toolkit
   &#160;<span id="projectnumber">4.2</span>
   </div>
   <div id="projectbrief">Agile Toolkit is a powerful web development framework. Inspired by GUI Applications development</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_advanced_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/Users/rw/Sites/atk4web/atk4/lib/Grid/Advanced.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php <span class="comment">// vim:ts=4:sw=4:et:fdm=marker</span>
<a name="l00016"></a><a class="code" href="class_grid___advanced.html">00016</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_grid___advanced.html">Grid_Advanced</a> <span class="keyword">extends</span> <a class="code" href="class_grid___basic.html">Grid_Basic</a> {
<a name="l00017"></a>00017     <span class="keyword">protected</span> $no_records_message=<span class="stringliteral">&quot;No matching records to display&quot;</span>;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019     <span class="keyword">public</span> $last_column;
<a name="l00020"></a>00020     <span class="keyword">public</span> $sortby=<span class="charliteral">&#39;0&#39;</span>;
<a name="l00021"></a>00021     <span class="keyword">public</span> $sortby_db=null;
<a name="l00022"></a>00022     <span class="keyword">public</span> $not_found=<span class="keyword">false</span>;
<a name="l00023"></a>00023 
<a name="l00024"></a>00024     <span class="keyword">public</span> $displayed_rows=0;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026     <span class="keyword">private</span> $totals_title_field=null;
<a name="l00027"></a>00027     <span class="keyword">private</span> $totals_title=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00028"></a><a class="code" href="class_grid___advanced.html#a006a1ee45474664193b59e380003a49a">00028</a>     <span class="keyword">public</span> <a class="code" href="class_grid___advanced.html#a006a1ee45474664193b59e380003a49a">$totals_t</a>=null;
<a name="l00029"></a>00029     <span class="keyword">public</span> $totals_value_na = <span class="charliteral">&#39;-&#39;</span>;
<a name="l00030"></a>00030     <span class="keyword">public</span> $data=null;
<a name="l00031"></a>00031 
<a name="l00036"></a><a class="code" href="class_grid___advanced.html#a76cc621b99688faa42569d2147cff579">00036</a>     <span class="keyword">protected</span> <a class="code" href="class_grid___advanced.html#a76cc621b99688faa42569d2147cff579">$tab_moves_down</a>=<span class="keyword">false</span>;
<a name="l00041"></a><a class="code" href="class_grid___advanced.html#ad68ba76461b376a0ef80892b9af3debd">00041</a>     <span class="keyword">protected</span> <a class="code" href="class_grid___advanced.html#ad68ba76461b376a0ef80892b9af3debd">$show_submit</a>=<span class="keyword">true</span>;
<a name="l00042"></a>00042     <span class="keyword">private</span> $record_order=null;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044     <span class="keyword">public</span> $title_col=array();
<a name="l00045"></a>00045 
<a name="l00068"></a><a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">00068</a>     <span class="keyword">protected</span> <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>=array();
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keyword">public</span> $js_widget=<span class="stringliteral">&#39;ui.atk4_grid&#39;</span>;
<a name="l00071"></a>00071     <span class="keyword">public</span> $js_widget_arguments=array();
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="class_grid___advanced.html#ab949cccd963058f0937d04bc26ee24a7">00073</a>     <span class="keyword">public</span> <a class="code" href="class_grid___advanced.html#ab949cccd963058f0937d04bc26ee24a7">$default_controller</a>=<span class="stringliteral">&#39;MVCGrid&#39;</span>;
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="class_grid___advanced.html#a4be4055f3361d4800e16bc2e2e38cda6">00075</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>(){
<a name="l00076"></a>00076         <a class="code" href="class_grid___advanced.html#a4be4055f3361d4800e16bc2e2e38cda6">parent::init</a>();
<a name="l00077"></a>00077         <span class="comment">//$this-&gt;add(&#39;Reloadable&#39;);</span>
<a name="l00078"></a>00078         <span class="comment">//$this-&gt;api-&gt;addHook(&#39;pre-render&#39;,array($this,&#39;precacheTemplate&#39;));</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080         $this-&gt;sortby=$this-&gt;<a class="code" href="class_abstract_object.html#a0706cc3b26932d2ad0a7dae981ed59e5">learn</a>(<span class="stringliteral">&#39;sortby&#39;</span>,@$_GET[$this-&gt;name.<span class="stringliteral">&#39;_sort&#39;</span>]);
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082     <span class="keyword">function</span> importFields(<a class="code" href="class_abstract_object.html#a08fdd91bde255dbe3e2d15a22d9663e8">$model</a>,$fields=undefined){
<a name="l00083"></a>00083         $this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;Controller_MVCGrid&#39;</span>)-&gt;importFields(<a class="code" href="class_abstract_object.html#a08fdd91bde255dbe3e2d15a22d9663e8">$model</a>,$fields);
<a name="l00084"></a>00084     }
<a name="l00085"></a><a class="code" href="class_grid___advanced.html#add8c5a33f231d9979e5f8bbded576d9e">00085</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#add8c5a33f231d9979e5f8bbded576d9e">defaultTemplate</a>(){
<a name="l00086"></a>00086         <span class="keywordflow">return</span> array(<span class="stringliteral">&#39;grid&#39;</span>);
<a name="l00087"></a>00087     }
<a name="l00091"></a><a class="code" href="class_grid___advanced.html#a3a46492254fde0243e3175d62270a806">00091</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a3a46492254fde0243e3175d62270a806">getExpanderId</a>(){
<a name="l00092"></a>00092         <span class="keywordflow">return</span> $_GET[<span class="stringliteral">&#39;expanded&#39;</span>].<span class="stringliteral">&#39;_expandedcontent_&#39;</span>.$_GET[<span class="stringliteral">&#39;id&#39;</span>];
<a name="l00093"></a>00093     }
<a name="l00094"></a>00094     <span class="keyword">function</span> getColumn($column){
<a name="l00095"></a>00095         $this-&gt;last_column=$column;
<a name="l00096"></a>00096         <span class="keywordflow">return</span> $this;
<a name="l00097"></a>00097     }
<a name="l00098"></a>00098     <span class="keyword">function</span> hasColumn($column){
<a name="l00099"></a>00099         <span class="keywordflow">if</span>(!is_string($column))<span class="keywordflow">throw</span> $this-&gt;exception(<span class="stringliteral">&#39;WRong&#39;</span>);
<a name="l00100"></a>00100         <span class="keywordflow">return</span> isset($this-&gt;columns[$column]);
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102     <span class="keyword">function</span> removeColumn(<a class="code" href="class_abstract_object.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>){
<a name="l00103"></a>00103         unset($this-&gt;columns[<a class="code" href="class_abstract_object.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>]);
<a name="l00104"></a>00104         <span class="keywordflow">if</span>($this-&gt;last_column==<a class="code" href="class_abstract_object.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>)$this-&gt;last_column=null;
<a name="l00105"></a>00105         <span class="keywordflow">return</span> $this;
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107     <span class="keyword">function</span> addButton($label,<a class="code" href="class_abstract_object.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=null,$return_button=<span class="keyword">false</span>){
<a name="l00108"></a>00108         $button=$this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;Button&#39;</span>,<span class="stringliteral">&#39;gbtn&#39;</span>.count($this-&gt;elements),<span class="stringliteral">&#39;grid_buttons&#39;</span>);
<a name="l00109"></a>00109         $button-&gt;setLabel($label);
<a name="l00110"></a>00110         <span class="keywordflow">if</span>($return_button)<span class="keywordflow">return</span> $button;
<a name="l00111"></a>00111         <span class="keywordflow">return</span> $button;
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113     <span class="keyword">function</span> addQuickSearch($fields,$class=<span class="stringliteral">&#39;QuickSearch&#39;</span>){
<a name="l00114"></a>00114         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>($class,null,<span class="stringliteral">&#39;quick_search&#39;</span>)
<a name="l00115"></a>00115             -&gt;useWith($this)
<a name="l00116"></a>00116             -&gt;useFields($fields);
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118     <span class="keyword">function</span> makeSortable($db_sort=null){
<a name="l00119"></a>00119         <span class="comment">// Sorting</span>
<a name="l00120"></a>00120         $reverse=<span class="keyword">false</span>;
<a name="l00121"></a>00121         <span class="keywordflow">if</span>(substr($db_sort,0,1)==<span class="charliteral">&#39;-&#39;</span>){
<a name="l00122"></a>00122             $reverse=<span class="keyword">true</span>;
<a name="l00123"></a>00123             $db_sort=substr($db_sort,1);
<a name="l00124"></a>00124         }
<a name="l00125"></a>00125         <span class="keywordflow">if</span>(!$db_sort)$db_sort=$this-&gt;last_column;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127         <span class="keywordflow">if</span>($this-&gt;sortby==$this-&gt;last_column){
<a name="l00128"></a>00128             <span class="comment">// we are already sorting by this column</span>
<a name="l00129"></a>00129             $info=array(<span class="charliteral">&#39;1&#39;</span>,$reverse?0:(<span class="stringliteral">&quot;-&quot;</span>.$this-&gt;last_column));
<a name="l00130"></a>00130             $this-&gt;sortby_db=$db_sort;
<a name="l00131"></a>00131         }elseif($this-&gt;sortby==<span class="stringliteral">&quot;-&quot;</span>.$this-&gt;last_column){
<a name="l00132"></a>00132             <span class="comment">// We are sorted reverse by this column</span>
<a name="l00133"></a>00133             $info=array(<span class="charliteral">&#39;2&#39;</span>,$reverse?$this-&gt;last_column:<span class="charliteral">&#39;0&#39;</span>);
<a name="l00134"></a>00134             $this-&gt;sortby_db=<span class="stringliteral">&quot;-&quot;</span>.$db_sort;
<a name="l00135"></a>00135         }<span class="keywordflow">else</span>{
<a name="l00136"></a>00136             <span class="comment">// we are not sorted by this column</span>
<a name="l00137"></a>00137             $info=array(<span class="charliteral">&#39;0&#39;</span>,$reverse?(<span class="stringliteral">&quot;-&quot;</span>.$this-&gt;last_column):$this-&gt;last_column);
<a name="l00138"></a>00138         }
<a name="l00139"></a>00139         $this-&gt;columns[$this-&gt;last_column][<span class="stringliteral">&#39;sortable&#39;</span>]=$info;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <span class="keywordflow">return</span> $this;
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143     <span class="keyword">function</span> makeTitle(){
<a name="l00144"></a>00144         $this-&gt;title_col[]=$this-&gt;last_column;
<a name="l00145"></a>00145         <span class="keywordflow">return</span> $this;
<a name="l00146"></a>00146     }
<a name="l00147"></a><a class="code" href="class_grid___advanced.html#afde88292c44dc59faf017738dae6dffb">00147</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#afde88292c44dc59faf017738dae6dffb">render</a>(){
<a name="l00148"></a>00148         <span class="keywordflow">if</span>($this-&gt;js_widget){
<a name="l00149"></a>00149             $fn=str_replace(<span class="stringliteral">&#39;ui.&#39;</span>,<span class="stringliteral">&#39;&#39;</span>,$this-&gt;js_widget);
<a name="l00150"></a>00150             $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;_load($this-&gt;js_widget)-&gt;$fn($this-&gt;js_widget_arguments);
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152         <span class="keywordflow">return</span> <a class="code" href="class_grid___advanced.html#afde88292c44dc59faf017738dae6dffb">parent::render</a>();
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154     <span class="keyword">function</span> format_number($field){
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156     <span class="keyword">function</span> format_text($field){
<a name="l00157"></a>00157         $this-&gt;current_row[$field] = $this-&gt;current_row[$field];
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159     <span class="keyword">function</span> format_html($field){
<a name="l00160"></a>00160         $this-&gt;current_row_html[$field] = $this-&gt;current_row[$field];
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162     <span class="keyword">function</span> init_money($field){
<a name="l00163"></a>00163         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;text-align: right&quot;&#39;</span>;
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165     <span class="keyword">function</span> init_real($field){
<a name="l00166"></a>00166         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;text-align: right&quot;&#39;</span>;
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168     <span class="keyword">function</span> init_fullwidth($field){
<a name="l00169"></a>00169         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 100%&quot;&#39;</span>;
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171     <span class="keyword">function</span> format_fullwidth($field){}
<a name="l00172"></a>00172     <span class="keyword">function</span> format_money($field){
<a name="l00173"></a>00173         $m=(float)$this-&gt;current_row[$field];
<a name="l00174"></a>00174         $this-&gt;current_row[$field]=number_format($m,2);
<a name="l00175"></a>00175         <span class="keywordflow">if</span>($m&lt;0){
<a name="l00176"></a>00176             $this-&gt;setTDParam($field,<span class="stringliteral">&#39;style/color&#39;</span>,<span class="stringliteral">&#39;red&#39;</span>);
<a name="l00177"></a>00177         }<span class="keywordflow">else</span>{
<a name="l00178"></a>00178             $this-&gt;setTDParam($field,<span class="stringliteral">&#39;style/color&#39;</span>,null);
<a name="l00179"></a>00179         }
<a name="l00180"></a>00180         $this-&gt;setTDParam($field,<span class="stringliteral">&#39;align&#39;</span>,<span class="stringliteral">&#39;right&#39;</span>);
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182     <span class="keyword">function</span> format_totals_number($field){
<a name="l00183"></a>00183         <span class="keywordflow">return</span> $this-&gt;format_number($field);
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185     <span class="keyword">function</span> format_totals_money($field){
<a name="l00186"></a>00186         <span class="keywordflow">return</span> $this-&gt;format_money($field);
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188     <span class="keyword">function</span> format_totals_real($field){
<a name="l00189"></a>00189         <span class="keywordflow">return</span> $this-&gt;format_real($field);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191     <span class="keyword">function</span> format_totals_text($field){
<a name="l00192"></a>00192         <span class="comment">// This method is mainly for totals title displaying</span>
<a name="l00193"></a>00193         <span class="keywordflow">if</span>($field==$this-&gt;totals_title_field){
<a name="l00194"></a>00194             $this-&gt;setTDParam($field,<span class="stringliteral">&#39;style/font-weight&#39;</span>,<span class="stringliteral">&#39;bold&#39;</span>);
<a name="l00195"></a>00195             <span class="comment">//$this-&gt;current_row[$field]=$this-&gt;totals_title.&#39;:&#39;;</span>
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         <span class="keywordflow">else</span> $this-&gt;current_row[$field]=$this-&gt;totals_value_na;
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199     <span class="keyword">function</span> format_time($field){
<a name="l00200"></a>00200         $this-&gt;current_row[$field]=date($this-&gt;api-&gt;getConfig(<span class="stringliteral">&#39;locale/time&#39;</span>,<span class="stringliteral">&#39;H:i:s&#39;</span>),
<a name="l00201"></a>00201                 strtotime($this-&gt;current_row[$field]));
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203     <span class="keyword">function</span> format_date($field){
<a name="l00204"></a>00204         <span class="keywordflow">if</span>(!$this-&gt;current_row[$field])$this-&gt;current_row[$field]=<span class="charliteral">&#39;-&#39;</span>; <span class="keywordflow">else</span>
<a name="l00205"></a>00205             $this-&gt;current_row[$field]=date($this-&gt;api-&gt;getConfig(<span class="stringliteral">&#39;locale/date&#39;</span>,<span class="stringliteral">&#39;d/m/Y&#39;</span>),
<a name="l00206"></a>00206                     strtotime($this-&gt;current_row[$field]));
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208     <span class="keyword">function</span> format_datetime($field){
<a name="l00209"></a>00209         <span class="keywordflow">if</span>(!$this-&gt;current_row[$field])$this-&gt;current_row[$field]=<span class="charliteral">&#39;-&#39;</span>; <span class="keywordflow">else</span>
<a name="l00210"></a>00210             $this-&gt;current_row[$field]=date($this-&gt;api-&gt;getConfig(<span class="stringliteral">&#39;locale/datetime&#39;</span>,<span class="stringliteral">&#39;d/m/Y H:i:s&#39;</span>),
<a name="l00211"></a>00211                     strtotime($this-&gt;current_row[$field]));
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     <span class="keyword">function</span> format_timestamp($field){
<a name="l00214"></a>00214         <span class="keywordflow">if</span>(!$this-&gt;current_row[$field])$this-&gt;current_row[$field]=<span class="charliteral">&#39;-&#39;</span>;
<a name="l00215"></a>00215         <span class="keywordflow">else</span>{
<a name="l00216"></a>00216             $format=$this-&gt;api-&gt;getConfig(<span class="stringliteral">&#39;locale/timestamp&#39;</span>,$this-&gt;api-&gt;getConfig(<span class="stringliteral">&#39;locale/datetime&#39;</span>,<span class="stringliteral">&#39;d/m/Y H:i:s&#39;</span>));
<a name="l00217"></a>00217             $this-&gt;current_row[$field]=date($format,strtotime($this-&gt;current_row[$field]));
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220     <span class="keyword">function</span> format_nowrap($field){
<a name="l00221"></a>00221         $this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field][<span class="stringliteral">&#39;style&#39;</span>]=<span class="stringliteral">&#39;nwhite-space: nowrap&#39;</span>;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223     <span class="keyword">function</span> format_wrap($field){
<a name="l00224"></a>00224         $this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field][<span class="stringliteral">&#39;style&#39;</span>]=<span class="stringliteral">&#39;white-space: wrap&#39;</span>;
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226     <span class="keyword">function</span> format_template($field){
<a name="l00227"></a>00227         <span class="keywordflow">if</span>(!($t=$this-&gt;columns[$field][<span class="stringliteral">&#39;template&#39;</span>])){
<a name="l00228"></a>00228             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_base_exception.html">BaseException</a>(<span class="stringliteral">&#39;use setTemplate() for field &#39;</span>.$field);
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230         $this-&gt;current_row_html[$field]=$t
<a name="l00231"></a>00231             -&gt;set($this-&gt;current_row)
<a name="l00232"></a>00232             -&gt;trySet(<span class="stringliteral">&#39;_value_&#39;</span>,$this-&gt;current_row[$field])
<a name="l00233"></a>00233             -&gt;render();
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235     <span class="keyword">function</span> format_widget($field, $widget, $params=array(), $widget_json=null){
<a name="l00236"></a>00236         $class=$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="stringliteral">&#39;_expander&#39;</span>;
<a name="l00237"></a>00237         $params=array(
<a name="l00238"></a>00238                 <span class="stringliteral">&#39;class&#39;</span>=&gt;$class.<span class="stringliteral">&quot;_&quot;</span>.$field.<span class="stringliteral">&quot; $widget lister_cell&quot;</span>
<a name="l00239"></a>00239                 )+$params;
<a name="l00240"></a>00240         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;_tag(<span class="charliteral">&#39;.&#39;</span>.$class.<span class="charliteral">&#39;_&#39;</span>.$field)-&gt;_load($widget)-&gt;activate($widget_json);
<a name="l00241"></a>00241         <span class="comment">/*</span>
<a name="l00242"></a>00242 <span class="comment">           $this-&gt;api-&gt;add(&#39;jUI&#39;)-&gt;addWidget($widget)-&gt;activate(&#39;.&#39;.$class.&#39;_&#39;.$field,$widget_json);</span>
<a name="l00243"></a>00243 <span class="comment">         */</span>
<a name="l00244"></a>00244         $this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field]=$params;
<a name="l00245"></a>00245         <span class="keywordflow">if</span>(!$this-&gt;current_row[$field]){
<a name="l00246"></a>00246             $this-&gt;current_row[$field]=$this-&gt;columns[$field][<span class="stringliteral">&#39;descr&#39;</span>];
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249     <span class="keyword">function</span> format_expander_widget($field,$column){
<a name="l00250"></a>00250         <span class="keywordflow">return</span> $this-&gt;format_expander($field,$column);
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252     <span class="keyword">function</span> format_expander($field, $column){
<a name="l00253"></a>00253         $class=$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="stringliteral">&#39;_expander&#39;</span>;
<a name="l00254"></a>00254         <span class="keywordflow">if</span>(!@$this-&gt;current_row[$field]){
<a name="l00255"></a>00255             $this-&gt;current_row[$field]=$column[<span class="stringliteral">&#39;descr&#39;</span>];
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257         <span class="comment">// TODO: </span>
<a name="l00258"></a>00258         <span class="comment">// reformat this using Button, once we have more advanced system to bypass rendering of</span>
<a name="l00259"></a>00259         <span class="comment">// sub-elements.</span>
<a name="l00260"></a>00260         <span class="comment">// $this-&gt;current_row[$field]=$this-&gt;add(&#39;Button&#39;,null,false)</span>
<a name="l00261"></a>00261         <span class="comment">//  -&gt;</span>
<a name="l00262"></a>00262         <span class="comment">//</span>
<a name="l00263"></a>00263         @$this-&gt;current_row_html[$field]=<span class="stringliteral">&#39;&lt;input type=&quot;checkbox&quot; class=&quot;button_&#39;</span>.$field.<span class="charliteral">&#39; &#39;</span>.$class.<span class="stringliteral">&#39;&quot;</span>
<a name="l00264"></a>00264 <span class="stringliteral">            id=&quot;&#39;</span>.$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;current_row[$column[<span class="stringliteral">&#39;idfield&#39;</span>]?$column[<span class="stringliteral">&#39;idfield&#39;</span>]:<span class="stringliteral">&#39;id&#39;</span>].<span class="stringliteral">&#39;&quot;</span>
<a name="l00265"></a>00265 <span class="stringliteral">            rel=&quot;&#39;</span>.$this-&gt;api-&gt;getDestinationURL($column[<span class="stringliteral">&#39;page&#39;</span>]?$column[<span class="stringliteral">&#39;page&#39;</span>]:<span class="stringliteral">&#39;./&#39;</span>.$field,
<a name="l00266"></a>00266             array(<span class="stringliteral">&#39;expander&#39;</span>=&gt;$field,
<a name="l00267"></a>00267                     <span class="stringliteral">&#39;cut_page&#39;</span>=&gt;1,
<a name="l00268"></a>00268                     <span class="stringliteral">&#39;expanded&#39;</span>=&gt;$this-&gt;name,
<a name="l00269"></a>00269 
<a name="l00270"></a>00270                     <span class="comment">// TODO: id is obsolete</span>
<a name="l00271"></a>00271                     <span class="stringliteral">&#39;id&#39;</span>=&gt;$this-&gt;current_row[$column[<span class="stringliteral">&#39;idfield&#39;</span>]?$column[<span class="stringliteral">&#39;idfield&#39;</span>]:<span class="stringliteral">&#39;id&#39;</span>],
<a name="l00272"></a>00272                     $this-&gt;columns[$field][<span class="stringliteral">&#39;refid&#39;</span>].<span class="stringliteral">&#39;_id&#39;</span>=&gt;$this-&gt;current_row[$column[<span class="stringliteral">&#39;idfield&#39;</span>]?$column[<span class="stringliteral">&#39;idfield&#39;</span>]:<span class="stringliteral">&#39;id&#39;</span>]
<a name="l00273"></a>00273                  )
<a name="l00274"></a>00274                 ).<span class="stringliteral">&#39;&quot;</span>
<a name="l00275"></a>00275 <span class="stringliteral">                /&gt;&lt;label for=&quot;&#39;</span>.$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;current_row[$column[<span class="stringliteral">&#39;idfield&#39;</span>]?$column[<span class="stringliteral">&#39;idfield&#39;</span>]:<span class="stringliteral">&#39;id&#39;</span>].<span class="stringliteral">&#39;&quot;&gt;&#39;</span>.
<a name="l00276"></a>00276                 $this-&gt;current_row[$field].<span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278     <span class="keyword">function</span> init_expander_widget($field){
<a name="l00279"></a>00279         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 40px; text-align: center&quot;&#39;</span>;
<a name="l00280"></a>00280         <span class="keywordflow">return</span> $this-&gt;init_expander($field);
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282     <span class="keyword">function</span> init_expander($field){
<a name="l00283"></a>00283         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 40px; text-align: center&quot;&#39;</span>;
<a name="l00284"></a>00284         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;find(<span class="stringliteral">&#39;.button_&#39;</span>.$field)-&gt;button();
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         <span class="keywordflow">if</span>(!isset($this-&gt;columns[$field][<span class="stringliteral">&#39;refid&#39;</span>])){
<a name="l00287"></a>00287             <span class="comment">// TODO: test</span>
<a name="l00288"></a>00288 
<a name="l00289"></a>00289             <span class="comment">/*</span>
<a name="l00290"></a>00290 <span class="comment">            $refid=$this-&gt;getController();</span>
<a name="l00291"></a>00291 <span class="comment">            if($refid)$refid=$refid-&gt;getModel();</span>
<a name="l00292"></a>00292 <span class="comment">             */</span>
<a name="l00293"></a>00293             $refid=$this-&gt;model;
<a name="l00294"></a>00294             <span class="comment">//if($refid)$refid=$refid-&gt;entity_code;</span>
<a name="l00295"></a>00295             <span class="keywordflow">if</span>($refid)$refid=$refid-&gt;getEntityCode();<span class="comment">//Get Protected property Model::entity_code</span>
<a name="l00296"></a>00296             <span class="keywordflow">if</span>($refid){
<a name="l00297"></a>00297                 $this-&gt;columns[$field][<span class="stringliteral">&#39;refid&#39;</span>]=$refid;
<a name="l00298"></a>00298             }<span class="keywordflow">else</span>{
<a name="l00299"></a>00299 
<a name="l00300"></a>00300                 <span class="keywordflow">if</span>($this-&gt;dq)
<a name="l00301"></a>00301                     $refid=$this-&gt;dq-&gt;args[<span class="stringliteral">&#39;table&#39;</span>];
<a name="l00302"></a>00302 
<a name="l00303"></a>00303                 <span class="keywordflow">if</span>(!$refid)$refid=preg_replace(<span class="stringliteral">&#39;/.*_/&#39;</span>,<span class="stringliteral">&#39;&#39;</span>,$this-&gt;api-&gt;page);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305                 $this-&gt;columns[$field][<span class="stringliteral">&#39;refid&#39;</span>]=$refid;
<a name="l00306"></a>00306             }
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309 
<a name="l00310"></a>00310         $class=$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="stringliteral">&#39;_expander&#39;</span>;
<a name="l00311"></a>00311         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;_selector(<span class="charliteral">&#39;.&#39;</span>.$class)-&gt;_load(<span class="stringliteral">&#39;ui.atk4_expander&#39;</span>)-&gt;atk4_expander();
<a name="l00312"></a>00312     }
<a name="l00313"></a><a class="code" href="class_grid___advanced.html#a8e7a18959f57aae7eca2d87f3693dbbc">00313</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a8e7a18959f57aae7eca2d87f3693dbbc">format_inline</a>($field, $idfield=<span class="stringliteral">&#39;id&#39;</span>){
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322     <span class="keyword">function</span> format_nl2br($field) {
<a name="l00323"></a>00323         $this-&gt;current_row[$field] = nl2br($this-&gt;current_row[$field]);
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325     <span class="keyword">function</span> format_order($field, $idfield=<span class="stringliteral">&#39;id&#39;</span>){
<a name="l00326"></a>00326         $n=$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;current_row[$idfield];
<a name="l00327"></a>00327         $this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field]=array(
<a name="l00328"></a>00328                 <span class="stringliteral">&#39;id&#39;</span>=&gt;$n,
<a name="l00329"></a>00329                 <span class="stringliteral">&#39;style&#39;</span>=&gt;array(
<a name="l00330"></a>00330                     <span class="stringliteral">&#39;cursor&#39;</span>=&gt;<span class="stringliteral">&#39;hand&#39;</span>
<a name="l00331"></a>00331                     )
<a name="l00332"></a>00332                 );
<a name="l00333"></a>00333         $this-&gt;current_row[$field]=$this-&gt;record_order-&gt;getCell($this-&gt;current_id);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335     <span class="keyword">function</span> init_link($field){
<a name="l00336"></a>00336         $this-&gt;setTemplate(<span class="stringliteral">&#39;&lt;a href=&quot;&lt;?&#39;</span>.<span class="stringliteral">&#39;$_link?&#39;</span>.<span class="stringliteral">&#39;&gt;&quot;&gt;&lt;?&#39;</span>.<span class="charliteral">&#39;$&#39;</span>.$field.<span class="charliteral">&#39;?&#39;</span>.<span class="stringliteral">&#39;&gt;&lt;/a&gt;&#39;</span>);
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     <span class="keyword">function</span> format_link($field){
<a name="l00339"></a>00339         $this-&gt;current_row[<span class="stringliteral">&#39;_link&#39;</span>]=$this-&gt;api-&gt;getDestinationURL(<span class="stringliteral">&#39;./&#39;</span>.$field,array(<span class="stringliteral">&#39;id&#39;</span>=&gt;$this-&gt;current_id));
<a name="l00340"></a>00340         <span class="keywordflow">return</span> $this-&gt;format_template($field);
<a name="l00341"></a>00341         <span class="comment">/*</span>
<a name="l00342"></a>00342 <span class="comment">           $this-&gt;current_row[$field]=&#39;&lt;a href=&quot;&#39;.$this-&gt;api-&gt;getDestinationURL($field,</span>
<a name="l00343"></a>00343 <span class="comment">           array(&#39;id&#39;=&gt;$this-&gt;current_id)).&#39;&quot;&gt;&#39;.</span>
<a name="l00344"></a>00344 <span class="comment">           $this-&gt;columns[$field][&#39;descr&#39;].&#39;&lt;/a&gt;&#39;;</span>
<a name="l00345"></a>00345 <span class="comment">         */</span>
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347     <span class="keyword">function</span> _performDelete($id){
<a name="l00348"></a>00348         <span class="keywordflow">if</span>($this-&gt;model){
<a name="l00349"></a>00349             <span class="keywordflow">return</span> $this-&gt;model-&gt;delete($id);
<a name="l00350"></a>00350         }
<a name="l00351"></a>00351         $this-&gt;dq-&gt;where(<span class="stringliteral">&#39;id&#39;</span>,$id)-&gt;do_delete();
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353     <span class="keyword">function</span> format_delete($field){
<a name="l00354"></a>00354         <span class="keywordflow">if</span>(!$this-&gt;model)<span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_base_exception.html">BaseException</a>(<span class="stringliteral">&#39;delete column requires $dq to be set&#39;</span>);
<a name="l00355"></a>00355         <span class="keywordflow">if</span>($id=@$_GET[$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field]){
<a name="l00356"></a>00356             <span class="comment">// this was clicked</span>
<a name="l00357"></a>00357             $this-&gt;_performDelete($id);
<a name="l00358"></a>00358             $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>()-&gt;univ()-&gt;successMessage(<span class="stringliteral">&#39;Deleted Successfully&#39;</span>)-&gt;getjQuery()-&gt;reload()-&gt;execute();
<a name="l00359"></a>00359         }
<a name="l00360"></a>00360         <span class="keywordflow">return</span> $this-&gt;format_confirm($field);
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362     <span class="keyword">function</span> init_button($field){
<a name="l00363"></a>00363         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 40px; text-align: center&quot;&#39;</span>;
<a name="l00364"></a>00364         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;find(<span class="stringliteral">&#39;.button_&#39;</span>.$field)-&gt;button();
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366     <span class="keyword">function</span> setButtonClass($class){
<a name="l00367"></a>00367         $this-&gt;columns[$this-&gt;last_column][<span class="stringliteral">&#39;button_class&#39;</span>]=$class;
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369     <span class="keyword">function</span> init_delete($field){
<a name="l00370"></a>00370         $this-&gt;columns[$field][<span class="stringliteral">&#39;button_class&#39;</span>]=<span class="stringliteral">&#39;red&#39;</span>;
<a name="l00371"></a>00371         $g=$this;
<a name="l00372"></a>00372         $this-&gt;api-&gt;addHook(<span class="stringliteral">&#39;post-init&#39;</span>,array($this,<span class="stringliteral">&#39;_move_delete&#39;</span>),array($field));
<a name="l00373"></a>00373         <span class="comment">/*function() use($g,$field){</span>
<a name="l00374"></a>00374 <span class="comment">          });</span>
<a name="l00375"></a>00375 <span class="comment">         */</span>
<a name="l00376"></a>00376         <span class="keywordflow">return</span> $this-&gt;init_confirm($field);
<a name="l00377"></a>00377     }
<a name="l00378"></a>00378     <span class="keyword">function</span> _move_delete($grid,$field){
<a name="l00379"></a>00379         <span class="keywordflow">if</span>($this-&gt;hasColumn($field))$this-&gt;addOrder()-&gt;move($field,<span class="stringliteral">&#39;last&#39;</span>)-&gt;now();
<a name="l00380"></a>00380     }
<a name="l00381"></a>00381     <span class="keyword">function</span> init_confirm($field){
<a name="l00382"></a>00382         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 40px; text-align: center&quot;&#39;</span>;
<a name="l00383"></a>00383         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;find(<span class="stringliteral">&#39;.button_&#39;</span>.$field)-&gt;button();
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385     <span class="keyword">function</span> init_prompt($field){
<a name="l00386"></a>00386         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;width: 40px; text-align: center&quot;&#39;</span>;
<a name="l00387"></a>00387         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)-&gt;find(<span class="stringliteral">&#39;.button_&#39;</span>.$field)-&gt;button();
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389     <span class="keyword">function</span> format_button($field){
<a name="l00390"></a>00390         $this-&gt;current_row_html[$field]=<span class="stringliteral">&#39;&lt;button type=&quot;button&quot; class=&quot;&#39;</span>.$this-&gt;columns[$field][<span class="stringliteral">&#39;button_class&#39;</span>].<span class="stringliteral">&#39;button_&#39;</span>.$field.<span class="stringliteral">&#39;&quot; &#39;</span>.
<a name="l00391"></a>00391             <span class="stringliteral">&#39;onclick=&quot;$(this).univ().ajaxec(\&#39;&#39;</span>.$this-&gt;api-&gt;getDestinationURL(null,
<a name="l00392"></a>00392             array($field=&gt;$this-&gt;current_id,$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field=&gt;$this-&gt;current_id)).<span class="charliteral">&#39;\&#39;</span>)<span class="stringliteral">&quot;&gt;&#39;.</span>
<a name="l00393"></a>00393 <span class="stringliteral">                (isset($this-&gt;columns[$field][&#39;icon&#39;])?$this-&gt;columns[$field][&#39;icon&#39;]:&#39;&#39;).</span>
<a name="l00394"></a>00394 <span class="stringliteral">                $this-&gt;columns[$field][&#39;descr&#39;].&#39;&lt;/button&gt;&#39;;</span>
<a name="l00395"></a>00395 <span class="stringliteral">    }</span>
<a name="l00396"></a>00396 <span class="stringliteral">    function format_confirm($field){</span>
<a name="l00397"></a>00397 <span class="stringliteral">        $this-&gt;current_row_html[$field]=&#39;&lt;button type=&quot;</span>button<span class="stringliteral">&quot; class=&quot;</span><span class="stringliteral">&#39;.$this-&gt;columns[$field][&#39;</span>button_class<span class="stringliteral">&#39;].&#39;</span> button_<span class="stringliteral">&#39;.$field.&#39;</span><span class="stringliteral">&quot; &#39;.</span>
<a name="l00398"></a>00398 <span class="stringliteral">            &#39;onclick=&quot;</span>$(<span class="keyword">this</span>).univ().confirm(\<span class="stringliteral">&#39;Are you sure?\&#39;).ajaxec(\&#39;&#39;</span>.$this-&gt;api-&gt;getDestinationURL(null,
<a name="l00399"></a>00399             array($field=&gt;$this-&gt;current_id,$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field=&gt;$this-&gt;current_id)).<span class="charliteral">&#39;\&#39;</span>)<span class="stringliteral">&quot;&gt;&#39;.</span>
<a name="l00400"></a>00400 <span class="stringliteral">                (isset($this-&gt;columns[$field][&#39;icon&#39;])?$this-&gt;columns[$field][&#39;icon&#39;]:&#39;&#39;).</span>
<a name="l00401"></a>00401 <span class="stringliteral">                $this-&gt;columns[$field][&#39;descr&#39;].&#39;&lt;/button&gt;&#39;;</span>
<a name="l00402"></a>00402 <span class="stringliteral">    }</span>
<a name="l00403"></a>00403 <span class="stringliteral">    function format_prompt($field){</span>
<a name="l00404"></a>00404 <span class="stringliteral">        $this-&gt;current_row_html[$field]=&#39;&lt;button type=&quot;</span>button<span class="stringliteral">&quot; class=&quot;</span><span class="stringliteral">&#39;.$this-&gt;columns[$field][&#39;</span>button_class<span class="stringliteral">&#39;].&#39;</span>button_<span class="stringliteral">&#39;.$field.&#39;</span><span class="stringliteral">&quot; &#39;.</span>
<a name="l00405"></a>00405 <span class="stringliteral">            &#39;onclick=&quot;</span>value=prompt(\<span class="stringliteral">&#39;Enter value: \&#39;);$(this).univ().ajaxec(\&#39;&#39;</span>.$this-&gt;api-&gt;getDestinationURL(null,
<a name="l00406"></a>00406             array($field=&gt;$this-&gt;current_id,$this-&gt;name.<span class="charliteral">&#39;_&#39;</span>.$field=&gt;$this-&gt;current_id)).<span class="stringliteral">&#39;&amp;value=\&#39;+value)&quot;&gt;&#39;</span>.
<a name="l00407"></a>00407                 (isset($this-&gt;columns[$field][<span class="stringliteral">&#39;icon&#39;</span>])?$this-&gt;columns[$field][<span class="stringliteral">&#39;icon&#39;</span>]:<span class="stringliteral">&#39;&#39;</span>).
<a name="l00408"></a>00408                 $this-&gt;columns[$field][<span class="stringliteral">&#39;descr&#39;</span>].<span class="stringliteral">&#39;&lt;/button&gt;&#39;</span>;
<a name="l00409"></a>00409     }
<a name="l00410"></a>00410     <span class="keyword">function</span> init_boolean($field){
<a name="l00411"></a>00411         @$this-&gt;columns[$field][<span class="stringliteral">&#39;thparam&#39;</span>].=<span class="stringliteral">&#39; style=&quot;text-align: center&quot;&#39;</span>;
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413     <span class="keyword">function</span> format_boolean($field){
<a name="l00414"></a>00414         <span class="keywordflow">if</span>($this-&gt;current_row[$field] &amp;&amp; $this-&gt;current_row[$field]!=<span class="charliteral">&#39;N&#39;</span> &amp;&amp; $this-&gt;current_row[$field]){
<a name="l00415"></a>00415             $this-&gt;current_row_html[$field]=<span class="stringliteral">&#39;&lt;div align=center&gt;&lt;span class=&quot;ui-icon ui-icon-check&quot;&gt;yes&lt;/span&gt;&lt;/div&gt;&#39;</span>;
<a name="l00416"></a>00416         }<span class="keywordflow">else</span> $this-&gt;current_row_html[$field]=<span class="stringliteral">&#39;&#39;</span>;
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418     <span class="keyword">function</span> format_checkbox($field){
<a name="l00419"></a>00419         $this-&gt;current_row_html[$field] = <span class="stringliteral">&#39;&lt;input type=&quot;checkbox&quot; id=&quot;cb_&#39;</span>.
<a name="l00420"></a>00420             $this-&gt;current_id.<span class="stringliteral">&#39;&quot; name=&quot;cb_&#39;</span>.$this-&gt;current_id.
<a name="l00421"></a>00421             <span class="stringliteral">&#39;&quot; value=&quot;&#39;</span>.$this-&gt;current_id.<span class="charliteral">&#39;&quot;&#39;</span>.
<a name="l00422"></a>00422             ($this-&gt;current_row[<span class="stringliteral">&#39;selected&#39;</span>]==<span class="charliteral">&#39;Y&#39;</span>?<span class="stringliteral">&quot; checked &quot;</span>:<span class="stringliteral">&quot; &quot;</span>).<span class="comment">//&#39;&quot; onclick=&quot;&#39;.</span>
<a name="l00423"></a>00423             <span class="comment">//$this-&gt;onClick($field).</span>
<a name="l00424"></a>00424             <span class="stringliteral">&#39;/&gt;&#39;</span>;
<a name="l00425"></a>00425         $this-&gt;setTDParam($field,<span class="stringliteral">&#39;width&#39;</span>,<span class="stringliteral">&#39;10&#39;</span>);
<a name="l00426"></a>00426         $this-&gt;setTDParam($field,<span class="stringliteral">&#39;align&#39;</span>,<span class="stringliteral">&#39;center&#39;</span>);
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428     <span class="keyword">function</span> format_image($field){
<a name="l00429"></a>00429         $this-&gt;current_row_html[$field]=<span class="stringliteral">&#39;&lt;img src=&quot;&#39;</span>.$this-&gt;current_row[$field].<span class="stringliteral">&#39;&quot;/&gt;&#39;</span>;
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431     <span class="keyword">function</span> addRecordOrder($field,$table=<span class="stringliteral">&#39;&#39;</span>){
<a name="l00432"></a>00432         <span class="keywordflow">if</span>(!$this-&gt;record_order){
<a name="l00433"></a>00433             $this-&gt;record_order=$this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;RecordOrder&#39;</span>);
<a name="l00434"></a>00434             $this-&gt;record_order-&gt;setField($field,$table);
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436         <span class="keywordflow">return</span> $this;
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438     <span class="keyword">function</span> staticSortCompare($row1,$row2){
<a name="l00439"></a>00439         <span class="keywordflow">if</span>($this-&gt;sortby[0]==<span class="charliteral">&#39;-&#39;</span>){
<a name="l00440"></a>00440             <span class="keywordflow">return</span> strcmp($row2[substr($this-&gt;sortby,1)],$row1[substr($this-&gt;sortby,1)]);
<a name="l00441"></a>00441         }
<a name="l00442"></a>00442         <span class="keywordflow">return</span> strcmp($row1[$this-&gt;sortby],$row2[$this-&gt;sortby]);
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444     <span class="keyword">function</span> applySorting($i,$order,$desc){
<a name="l00445"></a>00445         <span class="keywordflow">if</span>($i instanceof <a class="code" href="class_d_b__dsql.html">DB_dsql</a>)$i-&gt;order($order,$desc);
<a name="l00446"></a>00446         elseif($i instanceof <a class="code" href="class_model___table.html">Model_Table</a>)$i-&gt;setOrder($order,$desc);
<a name="l00447"></a>00447     }
<a name="l00448"></a>00448     <span class="keyword">function</span> getIterator(){
<a name="l00449"></a>00449         $i=parent::getIterator();
<a name="l00450"></a>00450         <span class="keywordflow">if</span>($this-&gt;sortby){
<a name="l00451"></a>00451             $desc=<span class="keyword">false</span>;
<a name="l00452"></a>00452             $order=$this-&gt;sortby_db;
<a name="l00453"></a>00453             <span class="keywordflow">if</span>(substr($this-&gt;sortby_db,0,1)==<span class="charliteral">&#39;-&#39;</span>){
<a name="l00454"></a>00454                 $desc=<span class="keyword">true</span>;
<a name="l00455"></a>00455                 $order=substr($order,1);
<a name="l00456"></a>00456             }
<a name="l00457"></a>00457             $this-&gt;applySorting($i,$order,$desc);
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459         <span class="keywordflow">return</span> $i;
<a name="l00460"></a>00460     }
<a name="l00461"></a>00461     <span class="keyword">function</span> setTemplate(<a class="code" href="class_abstract_view.html#aa3e9534005fd516d941f6a5569896e01">$template</a>){
<a name="l00462"></a>00462         <span class="comment">// This allows you to use Template</span>
<a name="l00463"></a>00463         $this-&gt;columns[$this-&gt;last_column][<span class="stringliteral">&#39;template&#39;</span>]=$this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;SMlite&#39;</span>)
<a name="l00464"></a>00464             -&gt;loadTemplateFromString(<a class="code" href="class_abstract_view.html#aa3e9534005fd516d941f6a5569896e01">$template</a>);
<a name="l00465"></a>00465         <span class="keywordflow">return</span> $this;
<a name="l00466"></a>00466     }
<a name="l00467"></a><a class="code" href="class_grid___advanced.html#ac79eeaca27de3b2b8fc5a4acd0e38a95">00467</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#ac79eeaca27de3b2b8fc5a4acd0e38a95">getFieldStyle</a>($field,$id){
<a name="l00472"></a>00472         $style=$this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field];
<a name="l00473"></a>00473         <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>=null;
<a name="l00474"></a>00474         <span class="keywordflow">if</span>(is_array($style)){
<a name="l00475"></a>00475             <span class="comment">// now we should convert style elements&#39; names to JS compatible</span>
<a name="l00476"></a>00476             <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>=array();
<a name="l00477"></a>00477             <span class="keywordflow">foreach</span>($style as $key=&gt;$value){
<a name="l00478"></a>00478                 <span class="keywordflow">switch</span>($key){
<a name="l00479"></a>00479                     <span class="comment">//case &#39;background-color&#39;:$tdparam[]=&quot;$key:$value&quot;;break;</span>
<a name="l00480"></a>00480                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;style&#39;</span>: <span class="keywordflow">case</span> <span class="stringliteral">&#39;css&#39;</span>:
<a name="l00481"></a>00481                         <span class="comment">// style is a nested array</span>
<a name="l00482"></a>00482                         <span class="keywordflow">foreach</span>($value as $k=&gt;$v){
<a name="l00483"></a>00483                             <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[]=<span class="stringliteral">&quot;$k::$v&quot;</span>;
<a name="l00484"></a>00484                         }
<a name="l00485"></a>00485                         <span class="keywordflow">break</span>;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487                     <span class="keywordflow">default</span>:
<a name="l00488"></a>00488                         <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[]=<span class="stringliteral">&quot;$key::$value&quot;</span>;
<a name="l00489"></a>00489                 }
<a name="l00490"></a>00490             }
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492         <span class="keywordflow">return</span> (is_array(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>)?join(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>,<span class="stringliteral">&#39;&lt;s&gt;&#39;</span>):<span class="stringliteral">&#39;&#39;</span>);
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494     <span class="keyword">function</span> getRowTitle(){
<a name="l00495"></a>00495         $title=<span class="charliteral">&#39; &#39;</span>;
<a name="l00496"></a>00496         <span class="keywordflow">foreach</span>($this-&gt;title_col as $col){
<a name="l00497"></a>00497             $title.=$this-&gt;current_row[$col];
<a name="l00498"></a>00498         }
<a name="l00499"></a>00499         <span class="keywordflow">if</span>($title==<span class="charliteral">&#39; &#39;</span>){
<a name="l00500"></a>00500             <span class="keywordflow">return</span> <span class="stringliteral">&quot;Row #&quot;</span>.$this-&gt;current_id;
<a name="l00501"></a>00501         }
<a name="l00502"></a>00502         <span class="keywordflow">return</span> substr($title,1);
<a name="l00503"></a>00503     }
<a name="l00504"></a><a class="code" href="class_grid___advanced.html#a673a3c64c12c2c2a567884dfaf12a74f">00504</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a673a3c64c12c2c2a567884dfaf12a74f">getFieldContent</a>($field,$id){
<a name="l00510"></a>00510         <span class="comment">// *** Getting required record from DB ***</span>
<a name="l00511"></a>00511         $idfield=$this-&gt;dq-&gt;args[<span class="stringliteral">&#39;fields&#39;</span>][0];
<a name="l00512"></a>00512         <span class="keywordflow">if</span>($idfield==<span class="charliteral">&#39;*&#39;</span>||strpos($idfield,<span class="charliteral">&#39;,&#39;</span>)!==<span class="keyword">false</span>)$idfield=<span class="stringliteral">&#39;id&#39;</span>;
<a name="l00513"></a>00513         $this-&gt;dq-&gt;where($idfield,$id);
<a name="l00514"></a>00514         <span class="comment">//we should switch off the limit or we won&#39;t get any value</span>
<a name="l00515"></a>00515         $this-&gt;dq-&gt;limit(1);
<a name="l00516"></a>00516         $row_data=$this-&gt;api-&gt;db-&gt;getHash($this-&gt;dq-&gt;select());
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         <span class="comment">// *** Initializing template ***</span>
<a name="l00519"></a>00519         $this-&gt;precacheTemplate(<span class="keyword">false</span>);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521         <span class="comment">// *** Rendering row ***</span>
<a name="l00522"></a>00522         $this-&gt;current_row=(array)$row_data;
<a name="l00523"></a>00523         $row=$this-&gt;<a class="code" href="class_grid___basic.html#ab05ae94078db7f9ae3bc38a3d229aef2">formatRow</a>();
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         <span class="comment">// *** Returning required field value ***</span>
<a name="l00526"></a>00526         <span class="keywordflow">return</span> $row[$field];
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528     <span class="keyword">function</span> applyTDParams($field,<a class="code" href="class_complete_lister.html#ab3c7a9eeb638bd5906689f9d5cba65bc">$totals</a>=<span class="keyword">false</span>){
<a name="l00529"></a>00529         <span class="comment">// setting cell parameters (tdparam)</span>
<a name="l00530"></a>00530         <a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>=@$this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field];
<a name="l00531"></a>00531         $tdparam_str=<span class="stringliteral">&#39;&#39;</span>;
<a name="l00532"></a>00532         <span class="keywordflow">if</span>(is_array(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>)){
<a name="l00533"></a>00533             <span class="comment">// wrap is replaced by style property</span>
<a name="l00534"></a>00534             unset(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[<span class="stringliteral">&#39;wrap&#39;</span>]);
<a name="l00535"></a>00535             <span class="keywordflow">if</span>(is_array(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[<span class="stringliteral">&#39;style&#39;</span>])){
<a name="l00536"></a>00536                 $tdparam_str.=<span class="stringliteral">&#39;style=&quot;&#39;</span>;
<a name="l00537"></a>00537                 <span class="keywordflow">foreach</span>(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[<span class="stringliteral">&#39;style&#39;</span>] as $key=&gt;$value)$tdparam_str.=$key.<span class="charliteral">&#39;:&#39;</span>.$value.<span class="charliteral">&#39;;&#39;</span>;
<a name="l00538"></a>00538                 $tdparam_str.=<span class="stringliteral">&#39;&quot; &#39;</span>;
<a name="l00539"></a>00539                 unset(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a>[<span class="stringliteral">&#39;style&#39;</span>]);
<a name="l00540"></a>00540             }
<a name="l00541"></a>00541             <span class="comment">//walking and combining string</span>
<a name="l00542"></a>00542             <span class="keywordflow">foreach</span>(<a class="code" href="class_grid___advanced.html#afa0d86b1f58528b8956905bf87cc560f">$tdparam</a> as $id=&gt;$value)$tdparam_str.=$id.<span class="stringliteral">&#39;=&quot;&#39;</span>.$value.<span class="stringliteral">&#39;&quot; &#39;</span>;
<a name="l00543"></a>00543             <span class="keywordflow">if</span>(<a class="code" href="class_complete_lister.html#ab3c7a9eeb638bd5906689f9d5cba65bc">$totals</a>)$this-&gt;totals_t-&gt;set(<span class="stringliteral">&quot;tdparam_$field&quot;</span>,trim($tdparam_str));
<a name="l00544"></a>00544             <span class="keywordflow">else</span> $this-&gt;row_t-&gt;trySetHTML(<span class="stringliteral">&quot;tdparam_$field&quot;</span>,trim($tdparam_str));
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547     <span class="keyword">function</span> setTotalsTitle($field,$title=<span class="stringliteral">&quot;Total:&quot;</span>){
<a name="l00548"></a>00548         $this-&gt;totals_title_field=$field;
<a name="l00549"></a>00549         $this-&gt;totals_title=$title;
<a name="l00550"></a>00550         <span class="keywordflow">return</span> $this;
<a name="l00551"></a>00551     }
<a name="l00552"></a><a class="code" href="class_grid___advanced.html#ac1054b9842592b68e4be6169a20bc8cb">00552</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#ac1054b9842592b68e4be6169a20bc8cb">formatTotalsRow</a>(){
<a name="l00553"></a>00553         <span class="keywordflow">foreach</span>($this-&gt;columns as $tmp=&gt;$column){
<a name="l00554"></a>00554             $formatters = explode(<span class="charliteral">&#39;,&#39;</span>,$column[<span class="stringliteral">&#39;type&#39;</span>]);
<a name="l00555"></a>00555             $all_failed=<span class="keyword">true</span>;
<a name="l00556"></a>00556             <span class="keywordflow">foreach</span>($formatters as $formatter){
<a name="l00557"></a>00557                 <span class="keywordflow">if</span>(method_exists($this,$m=<span class="stringliteral">&quot;format_totals_&quot;</span>.$formatter)){
<a name="l00558"></a>00558                     $all_failed=<span class="keyword">false</span>;
<a name="l00559"></a>00559                     $this-&gt;$m($tmp);
<a name="l00560"></a>00560                 }
<a name="l00561"></a>00561             }
<a name="l00562"></a>00562             <span class="comment">// setting cell parameters (tdparam)</span>
<a name="l00563"></a>00563             $this-&gt;applyTDParams($tmp,<span class="keyword">true</span>);
<a name="l00564"></a>00564             <span class="keywordflow">if</span>($all_failed)$this-&gt;current_row[$tmp]=$this-&gt;totals_value_na;
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566     }
<a name="l00567"></a><a class="code" href="class_grid___advanced.html#a61454d750109349ca19666b2b07fb44d">00567</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a61454d750109349ca19666b2b07fb44d">updateTotals</a>(){
<a name="l00568"></a>00568         <a class="code" href="class_grid___advanced.html#a61454d750109349ca19666b2b07fb44d">parent::updateTotals</a>();
<a name="l00569"></a>00569         <span class="keywordflow">foreach</span>($this-&gt;current_row as $key=&gt;$val){
<a name="l00570"></a>00570             <span class="keywordflow">if</span> ((!empty($this-&gt;totals_title_field)) and ($key==$this-&gt;totals_title_field)) {
<a name="l00571"></a>00571                 $this-&gt;totals[$key]=$this-&gt;totals_title;
<a name="l00572"></a>00572             }
<a name="l00573"></a>00573         }
<a name="l00574"></a>00574     }
<a name="l00581"></a><a class="code" href="class_grid___advanced.html#aec465f1f11eb671f1d517de90bb6a610">00581</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#aec465f1f11eb671f1d517de90bb6a610">addPaginator</a>($ipp=25){
<a name="l00582"></a>00582         <span class="comment">// adding ajax paginator</span>
<a name="l00583"></a>00583         $this-&gt;paginator=$this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;Paginator&#39;</span>);
<a name="l00584"></a>00584         $this-&gt;paginator-&gt;ipp($ipp);
<a name="l00585"></a>00585         <span class="keywordflow">return</span> $this;
<a name="l00586"></a>00586     }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <span class="keyword">public</span> <span class="keyword">function</span> setWidth( $width ){
<a name="l00589"></a>00589         $this-&gt;<span class="keyword">template</span>-&gt;set(<span class="stringliteral">&#39;container_style&#39;</span>, <span class="stringliteral">&#39;margin: 0 auto; width:&#39;</span>.$width.((!is_numeric($width))?<span class="stringliteral">&#39;&#39;</span>:<span class="stringliteral">&#39;px&#39;</span>));
<a name="l00590"></a>00590         <span class="keywordflow">return</span> $this;
<a name="l00591"></a>00591     }
<a name="l00592"></a>00592     <span class="keyword">public</span> <span class="keyword">function</span> setNoRecords($message){
<a name="l00593"></a>00593         $this-&gt;no_records_message=$message;
<a name="l00594"></a>00594         <span class="keywordflow">return</span> $this;
<a name="l00595"></a>00595     }
<a name="l00596"></a>00596     <span class="keyword">public</span> <span class="keyword">function</span> getCurrentIndex($idfield=<span class="stringliteral">&#39;id&#39;</span>){
<a name="l00597"></a>00597         <span class="comment">// TODO: think more to optimize this method</span>
<a name="l00598"></a>00598         <span class="keywordflow">if</span>(is_array($this-&gt;data))<span class="keywordflow">return</span> array_search(current($this-&gt;data),$this-&gt;data);
<a name="l00599"></a>00599         <span class="comment">// else it is dsql dataset...</span>
<a name="l00600"></a>00600         <span class="keywordflow">return</span> $this-&gt;current_row[$idfield];
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602     <span class="keyword">public</span> <span class="keyword">function</span> setTDParam($field,$path,$value){
<a name="l00603"></a>00603         <span class="comment">// adds a parameter. nested ones can be specified like &#39;style/color&#39;</span>
<a name="l00604"></a>00604         $path=explode(<span class="charliteral">&#39;/&#39;</span>,$path);
<a name="l00605"></a>00605         $current_position=&amp;$this-&gt;tdparam[$this-&gt;getCurrentIndex()][$field];
<a name="l00606"></a>00606         <span class="keywordflow">if</span>(!is_array($current_position))$current_position=array();
<a name="l00607"></a>00607         <span class="keywordflow">foreach</span>($path as $part){
<a name="l00608"></a>00608             <span class="keywordflow">if</span>(array_key_exists($part,$current_position)){
<a name="l00609"></a>00609                 $current_position=&amp;$current_position[$part];
<a name="l00610"></a>00610             }<span class="keywordflow">else</span>{
<a name="l00611"></a>00611                 $current_position[$part]=array();
<a name="l00612"></a>00612                 $current_position=&amp;$current_position[$part];
<a name="l00613"></a>00613             }
<a name="l00614"></a>00614         }
<a name="l00615"></a>00615         $current_position=$value;
<a name="l00616"></a>00616     }
<a name="l00617"></a>00617     <span class="keyword">public</span> <span class="keyword">function</span> setTabMovesDown($down=<span class="keyword">true</span>){
<a name="l00618"></a>00618         $this-&gt;tab_moves_down=$down;
<a name="l00619"></a>00619         <span class="keywordflow">return</span> $this;
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621     <span class="keyword">public</span> <span class="keyword">function</span> setShowSubmit($show=<span class="keyword">true</span>){
<a name="l00622"></a>00622         $this-&gt;show_submit=$show;
<a name="l00623"></a>00623         <span class="keywordflow">return</span> $this;
<a name="l00624"></a>00624     }
<a name="l00630"></a><a class="code" href="class_grid___advanced.html#ad9394280e8d0ff75f0f9175fb3900fa9">00630</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#ad9394280e8d0ff75f0f9175fb3900fa9">setInlineProperties</a>($props){
<a name="l00631"></a>00631         <span class="keywordflow">foreach</span>($props as $key=&gt;$val){
<a name="l00632"></a>00632             $this-&gt;$key=$val;
<a name="l00633"></a>00633         }
<a name="l00634"></a>00634         <span class="keywordflow">return</span> $this;
<a name="l00635"></a>00635     }
<a name="l00636"></a>00636     <span class="keyword">function</span> addOrder(){
<a name="l00637"></a>00637         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_abstract_object.html#a166878abcde3d0e82826ed3110c37c87">add</a>(<span class="stringliteral">&#39;Order&#39;</span>,<span class="stringliteral">&#39;columns&#39;</span>)
<a name="l00638"></a>00638             -&gt;useArray($this-&gt;columns)
<a name="l00639"></a>00639             ;
<a name="l00640"></a>00640     }
<a name="l00645"></a><a class="code" href="class_grid___advanced.html#a66111a2387275b7d6a664f9664db4a86">00645</a>     <span class="keyword">function</span> <a class="code" href="class_grid___advanced.html#a66111a2387275b7d6a664f9664db4a86">addSelectable</a>($field){
<a name="l00646"></a>00646         $this-&gt;js_widget=null;
<a name="l00647"></a>00647         $this-&gt;<a class="code" href="class_abstract_view.html#aeb3ef10a1d8090e178bbf7db8016c462">js</a>(<span class="keyword">true</span>)
<a name="l00648"></a>00648             -&gt;_load(<span class="stringliteral">&#39;ui.atk4_checkboxes&#39;</span>)
<a name="l00649"></a>00649             -&gt;atk4_checkboxes(array(<span class="stringliteral">&#39;dst_field&#39;</span>=&gt;$field));
<a name="l00650"></a>00650         $this-&gt;addColumn(<span class="stringliteral">&#39;checkbox&#39;</span>,<span class="stringliteral">&#39;selected&#39;</span>);
<a name="l00651"></a>00651 
<a name="l00652"></a>00652         $this-&gt;addOrder()
<a name="l00653"></a>00653             -&gt;useArray($this-&gt;columns)
<a name="l00654"></a>00654             -&gt;move(<span class="stringliteral">&#39;selected&#39;</span>,<span class="stringliteral">&#39;first&#39;</span>)
<a name="l00655"></a>00655             -&gt;now();
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657     <span class="comment">/* to reuse td params */</span>
<a name="l00658"></a>00658     <span class="keyword">function</span> getAllTDParams(){
<a name="l00659"></a>00659         <span class="keywordflow">return</span> $this-&gt;tdparam;
<a name="l00660"></a>00660     }
<a name="l00661"></a>00661 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>Advanced.php</b>      </li>

    <li class="footer">Generated on Thu Aug 23 2012 12:28:40 for Agile Toolkit by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
